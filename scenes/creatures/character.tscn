[gd_scene load_steps=12 format=3 uid="uid://dc1qxbru5n4ek"]

[ext_resource type="Script" uid="uid://b4wkanyvxmbvk" path="res://scripts/character_controller.gd" id="1_0gv8e"]
[ext_resource type="Resource" uid="uid://b3mg6ujtq84wc" path="res://resources/items/staff.tres" id="2_2cgup"]
[ext_resource type="PackedScene" uid="uid://b82435qvhgiy4" path="res://imported_data/meshes/animated/Necromancer.glb" id="2_rkhd4"]
[ext_resource type="AnimationLibrary" uid="uid://b827a18iq2vj4" path="res://animations/kay_skeleton.tres" id="4_0lw5n"]
[ext_resource type="Script" uid="uid://dtnev0hrcaemf" path="res://scripts/body_parts/body_part_receiver.gd" id="4_23gjd"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://csec5q8kwamah" path="res://animations/kaykit_tree.tres" id="4_my7n2"]
[ext_resource type="Script" uid="uid://16xd0nprw7xc" path="res://scripts/animation_helpers/weapon_helper.gd" id="4_psudl"]
[ext_resource type="Script" uid="uid://cu7derv5j3odh" path="res://scripts/creature_controller.gd" id="5_dp8ca"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_lrhn5"]
radius = 0.332
height = 1.17964

[sub_resource type="Animation" id="Animation_0lw5n"]
length = 0.001

[sub_resource type="AnimationLibrary" id="AnimationLibrary_2cgup"]
_data = {
&"RESET": SubResource("Animation_0lw5n")
}

[node name="character" type="CharacterBody3D"]
script = ExtResource("1_0gv8e")
movement_speed = 1.5
weapon_data = ExtResource("2_2cgup")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00398634, 0.582965, 0.00322835)
shape = SubResource("CapsuleShape3D_lrhn5")

[node name="Necromancer" parent="." instance=ExtResource("2_rkhd4")]

[node name="Skeleton3D" parent="Necromancer/Rig" index="0"]
bones/0/position = Vector3(0, 4.29988e-05, 0)
bones/1/position = Vector3(0, 0.336845, 0)
bones/1/rotation = Quaternion(8.25518e-05, -1.19209e-07, 9.84094e-12, 1)
bones/2/rotation = Quaternion(9.44731e-05, 0.000114605, -0.0222859, 0.999752)
bones/3/rotation = Quaternion(3.62773e-05, 1.03678e-06, 0.0222866, 0.999752)
bones/3/scale = Vector3(1, 1, 1)
bones/4/position = Vector3(0.212007, 0.134124, -4.2124e-05)
bones/4/rotation = Quaternion(-0.719871, 0.0166032, -0.311336, 0.620146)
bones/4/scale = Vector3(1, 0.999999, 1)
bones/5/rotation = Quaternion(4.67596e-08, -3.62373e-08, -0.7471, 0.664712)
bones/5/scale = Vector3(1, 0.999999, 1)
bones/6/rotation = Quaternion(7.35055e-09, -9.98223e-11, 0.0266581, 0.999645)
bones/6/scale = Vector3(1, 1, 1)
bones/7/rotation = Quaternion(-0.454044, -0.243237, -0.00577787, 0.857115)
bones/7/scale = Vector3(1, 1, 1)
bones/8/position = Vector3(3.0509e-08, 0.0961251, -0.0575)
bones/8/rotation = Quaternion(-4.72779e-05, 4.72811e-05, -0.706977, 0.707237)
bones/8/scale = Vector3(1, 1, 1)
bones/9/position = Vector3(-0.211985, 0.134113, -3.61693e-05)
bones/9/rotation = Quaternion(-0.678487, 0.263803, 0.461523, 0.507011)
bones/9/scale = Vector3(1, 0.999999, 1)
bones/10/rotation = Quaternion(2.83681e-08, 4.04078e-08, 0.698009, 0.716089)
bones/10/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(-1.03762e-10, 2.99413e-10, -0.0266581, 0.999645)
bones/11/scale = Vector3(1, 1, 1)
bones/12/rotation = Quaternion(-0.296451, 0.482212, 0.00956839, 0.824316)
bones/12/scale = Vector3(1, 1, 1)
bones/13/position = Vector3(-7.83563e-10, 0.0961251, -0.0575)
bones/13/rotation = Quaternion(-4.72779e-05, -4.72811e-05, 0.706977, 0.707237)
bones/13/scale = Vector3(1, 1, 1)
bones/14/rotation = Quaternion(-0.000111975, -0.000108294, 6.62354e-06, 1)
bones/15/position = Vector3(0.170945, 0.106256, 0.0102932)
bones/15/rotation = Quaternion(0.992845, -2.22349e-07, -3.33456e-08, 0.119407)
bones/15/scale = Vector3(1, 1, 1)
bones/16/rotation = Quaternion(0.575227, 5.64771e-08, -3.99477e-07, 0.817994)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(-0.768615, -1.0681e-07, 6.81469e-08, 0.639711)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(6.48569e-09, 0.920055, -0.39179, 1.02113e-07)
bones/18/scale = Vector3(1, 0.999998, 1)
bones/19/position = Vector3(-0.170945, 0.0909448, -0.0102932)
bones/19/rotation = Quaternion(0.996555, 3.341e-07, 4.7131e-08, 0.0829408)
bones/19/scale = Vector3(1, 1, 1)
bones/20/rotation = Quaternion(0.934048, -2.46587e-08, 6.48665e-07, 0.357148)
bones/20/scale = Vector3(1, 0.999999, 1)
bones/21/rotation = Quaternion(-0.743531, 1.86119e-07, -6.18864e-07, 0.668701)
bones/21/scale = Vector3(1, 1, 0.999999)
bones/22/rotation = Quaternion(2.50278e-08, 0.919954, -0.392027, 9.59705e-08)
bones/22/scale = Vector3(1, 1, 1)
bones/23/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/24/position = Vector3(0.170945, 0.021533, 0.203892)
bones/24/rotation = Quaternion(-0.707382, -7.04985e-08, -7.05584e-08, 0.706831)
bones/25/position = Vector3(1.41541e-08, 0.362833, -2.42861e-15)
bones/25/rotation = Quaternion(6.66154e-15, -1.38321e-22, 1, 1.90953e-19)
bones/26/position = Vector3(3.75294e-09, 0.213436, -8.89466e-12)
bones/26/rotation = Quaternion(3.49345e-08, 0.391084, 0.920355, 2.9526e-08)
bones/26/scale = Vector3(1, 1, 1)
bones/27/position = Vector3(5.19086e-09, 0.16565, 1.32234e-08)
bones/27/rotation = Quaternion(-0.391084, 2.95078e-08, 1.06805e-08, 0.920355)
bones/27/scale = Vector3(1, 1, 1)
bones/28/rotation = Quaternion(1, -8.86653e-16, 7.54979e-08, -1.33996e-22)
bones/29/rotation = Quaternion(-1.28146e-11, 1.54311e-16, -1.94669e-08, 1)
bones/30/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/31/position = Vector3(-0.170945, 0.0132214, -0.143406)
bones/31/rotation = Quaternion(-0.117773, -1.02762e-07, -7.86782e-09, 0.993041)
bones/31/scale = Vector3(1, 1, 1)
bones/32/position = Vector3(1.94581e-08, 0.362833, -5.79553e-09)
bones/32/rotation = Quaternion(6.77228e-15, -1.38321e-22, 1, 9.9815e-16)
bones/33/position = Vector3(-1.11482e-08, 0.213436, 4.44089e-16)
bones/33/rotation = Quaternion(3.49345e-08, 0.391084, 0.920355, 2.95261e-08)
bones/33/scale = Vector3(1, 1, 1)
bones/34/position = Vector3(2.00792e-08, 0.16565, -3.06151e-08)
bones/34/rotation = Quaternion(-0.391084, 2.95078e-08, 1.06805e-08, 0.920355)
bones/34/scale = Vector3(1, 1, 1)
bones/35/rotation = Quaternion(1, -5.23384e-15, 7.54979e-08, 3.3499e-23)
bones/36/rotation = Quaternion(7.44417e-09, -2.12898e-16, -1.94669e-08, 1)
bones/36/scale = Vector3(1, 1, 1)
bones/37/position = Vector3(0.453508, 0.881182, -0.883708)
bones/37/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/38/position = Vector3(0.513181, 0.883044, -0.0806067)
bones/38/rotation = Quaternion(0.681348, 0.188904, 0.681525, 0.188691)
bones/38/scale = Vector3(1, 1, 1)
bones/39/position = Vector3(-0.453507, 0.881182, -0.883709)
bones/39/rotation = Quaternion(-0.707107, -7.27951e-08, -7.27951e-08, 0.707107)
bones/40/position = Vector3(-0.513182, 0.922899, 0.121991)
bones/40/rotation = Quaternion(-0.603754, 0.368219, 0.603718, -0.367995)
bones/40/scale = Vector3(1, 1, 1)
script = ExtResource("4_23gjd")

[node name="handslot_r" type="BoneAttachment3D" parent="Necromancer/Rig/Skeleton3D" index="7"]
transform = Transform3D(-0.000530632, 0.000303196, -1, -0.458623, 0.888631, 0.000512655, 0.888631, 0.458623, -0.000332988, -0.492914, 0.868552, 0.270776)
bone_name = "handslot.r"
bone_idx = 13

[node name="marker_2h" type="Marker3D" parent="Necromancer/Rig/Skeleton3D/handslot_r"]
script = ExtResource("4_psudl")

[node name="LookAtModifier3D" type="LookAtModifier3D" parent="Necromancer/Rig/Skeleton3D" index="8"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.21297, 1.01102, 1.32833)
bone_name = "head"
bone = 14

[node name="AnimationPlayer" parent="Necromancer" index="1"]
libraries = {
&"": ExtResource("4_0lw5n")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Necromancer")
tree_root = ExtResource("4_my7n2")
anim_player = NodePath("../actual_usable_anim_player")
parameters/2H_Melee_Attack_Chop/atk_speed/scale = 1.5
parameters/IWR/blend_position = -1.50129

[node name="creature_holder" type="Node" parent="."]
script = ExtResource("5_dp8ca")

[node name="actual_usable_anim_player" type="AnimationPlayer" parent="."]
root_node = NodePath("../Necromancer")
libraries = {
&"": SubResource("AnimationLibrary_2cgup"),
&"kay_skeleton": ExtResource("4_0lw5n")
}

[node name="NavigationObstacle3D" type="NavigationObstacle3D" parent="."]
visible = false
radius = 0.4
avoidance_layers = 4

[editable path="Necromancer"]
